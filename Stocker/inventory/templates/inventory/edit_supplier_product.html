{% extends 'base.html' %}
{% load static %}

{% block title %}Edit Supplier Product{% endblock %}

{% block fileStyle %}
<link rel="stylesheet" href="{% static 'css/add_product.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid vh-75 d-flex mt-5 pt-4 mb-5 pb-4">
  <div class="card shadow-sm h-50">
    <div class="card-header bg-success text-white fw-bold">
      Edit Product â€” {{ supplier_product.product.name }}
    </div>

    <div class="card-body">
      {% if form.non_field_errors %}
        <div class="alert alert-danger">
          {% for error in form.non_field_errors %}
            <div>{{ error }}</div>
          {% endfor %}
        </div>
      {% endif %}

      <form method="POST">
        {% csrf_token %}
        <div class="row g-3">


          <div class="col-md-6">
            <label class="form-label text-uppercase small fw-bold">Product</label>
            <select class="form-select bg-light rounded-3 border-0 p-3" disabled>
              <option selected>{{ supplier_product.product.name }}</option>
            </select>
            {% if form.product.errors %}
              <div class="text-danger small mt-1">{{ form.product.errors.0 }}</div>
            {% endif %}
          </div>


          <div class="col-md-6">
            <label for="id_unit_cost" class="form-label text-uppercase small fw-bold">Unit Cost</label>
            <input
              type="number"
              step="0.01"
              name="unit_cost"
              id="id_unit_cost"
              class="form-control bg-light rounded-3 border-0 p-3"
              placeholder="Enter unit cost"
              value="{{ form.unit_cost.value|default_if_none:supplier_product.unit_cost }}"
              required
            >
            {% if form.unit_cost.errors %}
              <div class="text-danger small mt-1">{{ form.unit_cost.errors.0 }}</div>
            {% endif %}
          </div>

  
          <div class="col-md-6">
            <label for="id_lead_time_days" class="form-label text-uppercase small fw-bold">Lead Time (Days)</label>
            <input
              type="number"
              name="lead_time_days"
              id="id_lead_time_days"
              class="form-control bg-light rounded-3 border-0 p-3"
              placeholder="Enter lead time"
              value="{{ form.lead_time_days.value|default_if_none:supplier_product.lead_time_days }}"
              required
            >
            {% if form.lead_time_days.errors %}
              <div class="text-danger small mt-1">{{ form.lead_time_days.errors.0 }}</div>
            {% endif %}
          </div>


          <div class="col-md-6">
            <label for="id_last_supplied" class="form-label text-uppercase small fw-bold">Last Supplied</label>
            <input
              type="date"
              name="last_supplied"
              id="id_last_supplied"
              class="form-control bg-light rounded-3 border-0 p-3"
              value="{% if form.last_supplied.value %}{{ form.last_supplied.value }}{% elif supplier_product.last_supplied %}{{ supplier_product.last_supplied|date:'Y-m-d' }}{% endif %}"
            >
            {% if form.last_supplied.errors %}
              <div class="text-danger small mt-1">{{ form.last_supplied.errors.0 }}</div>
            {% endif %}
          </div>


          <div class="col-md-6">
            <label for="id_min_order_qty" class="form-label text-uppercase small fw-bold">Min Order Qty</label>
            <input
              type="number"
              name="min_order_qty"
              id="id_min_order_qty"
              class="form-control bg-light rounded-3 border-0 p-3"
              placeholder="Enter minimum quantity"
              value="{{ form.min_order_qty.value|default_if_none:supplier_product.min_order_qty }}"
              required
            >
            {% if form.min_order_qty.errors %}
              <div class="text-danger small mt-1">{{ form.min_order_qty.errors.0 }}</div>
            {% endif %}
          </div>


        <div class="col-md-6">
        <label for="id_is_active" class="form-label text-uppercase small fw-bold">Status</label>
        {% with val=form.is_active.value|default_if_none:supplier_product.is_active %}
            <select name="is_active" id="id_is_active" class="form-select bg-light rounded-3 border-0 p-3" required>
            <option value="True"  {% if val == True or val == 'True' %}selected{% endif %}>Active</option>
            <option value="False" {% if val == False or val == 'False' %}selected{% endif %}>Inactive</option>
            </select>
        {% endwith %}
        {% if form.is_active.errors %}
            <div class="text-danger small mt-1">{{ form.is_active.errors.0 }}</div>
        {% endif %}
        </div>


        </div>

        <div class="mt-4 d-flex gap-2">
          <button type="submit" class="btn btn-success px-4">Save Changes</button>
          <a href="{% url 'inventory:supplier_detail_view' supplier_product.supplier.pk %}" class="btn btn-secondary px-4">Cancel</a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
